<!-- footer Area start -->
<footer class="footer">
    <div class="container">
        <div class="logo mb-16">
            <a href="index-2.html">
                <img src="assets/media/new.png" style="height:40px !important; left: 10000px !important;" alt="">
            </a>
        </div>
        <span class="me-3">SINCE</span>
        <span>1995</span>
        <ul class="footer-link list-unstyled">
            <li>
                <a href="index.php" class="active">Home</a>
            </li>
            <li>
                <a href="about.php">About</a>
            </li>
            <li>
                <a href="services.php">Services</a>
            </li>
            <li>
                <a href="contact.php">Contact</a>
            </li>
        </ul>
        <ul class="social-icon list-unstyled mb-64">
            <li>
                <a href="#">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M31.9686 9.40809C31.8937 7.7078 31.6187 6.53887 31.2248 5.52598C30.8185 4.45082 30.1934 3.48823 29.3744 2.68803C28.5742 1.87537 27.6052 1.2439 26.5425 0.843915C25.5238 0.450039 24.3609 0.175083 22.6607 0.100117C20.9477 0.0188025 20.4039 0 16.0593 0C11.7147 0 11.1709 0.0188025 9.46424 0.0937683C7.76396 0.168734 6.59503 0.443934 5.58238 0.837566C4.50697 1.2439 3.54438 1.86902 2.74418 2.68803C1.93152 3.48823 1.30029 4.45717 0.900067 5.51988C0.506191 6.53887 0.231235 7.70146 0.15627 9.40174C0.0749548 11.1147 0.0561523 11.6585 0.0561523 16.0031C0.0561523 20.3477 0.0749548 20.8915 0.149921 22.5982C0.224886 24.2984 0.500087 25.4674 0.893962 26.4803C1.30029 27.5554 1.93152 28.518 2.74418 29.3182C3.54438 30.1309 4.51332 30.7624 5.57603 31.1623C6.59503 31.5562 7.75761 31.8312 9.45814 31.9061C11.1645 31.9813 11.7086 31.9999 16.0532 31.9999C20.3978 31.9999 20.9416 31.9813 22.6482 31.9061C24.3485 31.8312 25.5174 31.5562 26.5301 31.1623C28.6806 30.3309 30.3809 28.6306 31.2124 26.4803C31.606 25.4613 31.8812 24.2984 31.9562 22.5982C32.0311 20.8915 32.05 20.3477 32.05 16.0031C32.05 11.6585 32.0436 11.1147 31.9686 9.40809ZM29.087 22.4731C29.0181 24.0359 28.7556 24.8799 28.5368 25.4425C27.9991 26.8365 26.8927 27.943 25.4986 28.4807C24.936 28.6995 24.086 28.962 22.5293 29.0306C20.8415 29.1058 20.3353 29.1243 16.0656 29.1243C11.796 29.1243 11.2834 29.1058 9.60172 29.0306C8.03891 28.962 7.195 28.6995 6.63239 28.4807C5.93865 28.2243 5.30718 27.8179 4.79463 27.2866C4.26327 26.7677 3.85694 26.1426 3.60055 25.4488C3.38175 24.8862 3.11925 24.0359 3.05063 22.4795C2.97542 20.7917 2.95687 20.2852 2.95687 16.0156C2.95687 11.7459 2.97542 11.2334 3.05063 9.55191C3.11925 7.98911 3.38175 7.14519 3.60055 6.58258C3.85694 5.8886 4.26327 5.25737 4.80098 4.74458C5.31963 4.21323 5.94475 3.8069 6.63874 3.55074C7.20135 3.33195 8.05161 3.06945 9.60807 3.00059C11.2959 2.92562 11.8023 2.90682 16.0717 2.90682C20.3477 2.90682 20.8539 2.92562 22.5356 3.00059C24.0984 3.06945 24.9424 3.33195 25.505 3.55074C26.1987 3.8069 26.8302 4.21323 27.3427 4.74458C27.8741 5.26348 28.2804 5.8886 28.5368 6.58258C28.7556 7.14519 29.0181 7.99521 29.087 9.55191C29.1619 11.2397 29.1807 11.7459 29.1807 16.0156C29.1807 20.2852 29.1619 20.7853 29.087 22.4731Z"
                            fill="#AFB1B6" />
                        <path
                            d="M16.0592 7.78271C11.521 7.78271 7.83887 11.4646 7.83887 16.0031C7.83887 20.5416 11.521 24.2234 16.0592 24.2234C20.5977 24.2234 24.2796 20.5416 24.2796 16.0031C24.2796 11.4646 20.5977 7.78271 16.0592 7.78271ZM16.0592 21.3354C13.115 21.3354 10.7269 18.9475 10.7269 16.0031C10.7269 13.0586 13.115 10.6707 16.0592 10.6707C19.0036 10.6707 21.3916 13.0586 21.3916 16.0031C21.3916 18.9475 19.0036 21.3354 16.0592 21.3354Z"
                            fill="#AFB1B6" />
                        <path
                            d="M26.5239 7.45765C26.5239 8.51743 25.6646 9.37673 24.6046 9.37673C23.5448 9.37673 22.6855 8.51743 22.6855 7.45765C22.6855 6.39763 23.5448 5.53857 24.6046 5.53857C25.6646 5.53857 26.5239 6.39763 26.5239 7.45765Z"
                            fill="#AFB1B6" />
                    </svg>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fab fa-facebook-f"></i>
                </a>
            </li>
            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path
                            d="M18.242 14.1624L26.9844 4H24.9128L17.3217 12.8238L11.2588 4H4.26587L13.4342 17.3432L4.26587 28H6.33766L14.354 18.6817L20.7569 28H27.7498L18.2415 14.1624H18.242ZM15.4044 17.4608L14.4755 16.1321L7.08416 5.55961H10.2663L16.2312 14.0919L17.1601 15.4206L24.9137 26.5113H21.7316L15.4044 17.4613V17.4608Z"
                            fill="#AFB1B6" />
                    </svg>
                </a>
            </li>
        </ul>
        <p class="lh-150 color-white mb-0">Â©2024 All rights are reserved by <a href="index-2.html">trimStyle</a></p>
    </div>
</footer>
<!-- footer Area end -->
</div>

<!-- appoinment form Area start -->
<section class="appoinment-form">
    <div class="container">
        <div class="row justify-content-center align-items-center">
            <div class="col-xl-6 col-lg-8">
                <div class="text-end">
                    <button class="close"><i class="far fa-times"></i></button>
                </div>
                <div class="content bg-dark-3">
                    <h2 class="fw-7 fs-36 font-sec lh-110 color-white mb-48 text-center">APPOINTMENT FORM</h2>
                    <?php
                    if (isset($_POST['submit'])) {
                        $name = $_POST['name'];
                        $email = $_POST['email'];
                        $phone = $_POST['phone'];
                        $date = $_POST['date'];
                        $service = $_POST['service-name'];
                        $employee = $_POST['employee'];
                        $sql11 = "SELECT * FROM user where email='$email'";
                        $sql11Run = mysqli_query($conn, $sql11);
                        if (mysqli_num_rows($sql11Run) > 0) {
                            fetchDetails($email, $date, $service, $employee);
                        } else {
                            $sql8 = "insert into user(fullName,email,phoneNo,role) values('$name', '$email', '$phone', 'Client')";
                            $sql8Run = mysqli_query($conn, $sql8);
                            if (!$sql8Run) {
                                die(mysqli_error());
                            }
                            if ($sql8Run) {
                                fetchDetails($email, $date, $service, $employee);
                            } else {
                                echo "<script>alert('Account is aready created with this mail')</script>";
                            }
                            ;
                        }

                    }


                    function fetchDetails($email, $date, $service, $employee)
                    {
                        global $conn;
                        $sql9 = "SELECT * FROM user where email='$email'";
                        $sql9Run = mysqli_query($conn, $sql9);
                        if (!$sql9Run) {
                            die(mysqli_error());
                        }
                        $row9 = mysqli_fetch_array($sql9Run);
                        $userId = $row9['userID'];
                        $fullName = $row9['fullName'];
                        $phone = $row9['phoneNo'];
                        $sql10 = "insert into appointment(fullName,email,phoneNo,Date,serviceID,employeeID,packageID,userID) 
                                values('$fullName', '$email', '$phone', '$date', '$service', '$employee',NULL, '$userId')";
                        $sql10Run = mysqli_query($conn, $sql10);
                        if (!$sql10Run) {
                            die(mysqli_error());
                        }
                        if ($sql10Run) {
                            echo "<script>alert('Appointment has been booked successfully')</script>";
                        } else {
                            echo "<script>alert('Failed to book appointment')</script>";
                        }
                        ;
                    }
                    ?>
                    <form method="post">
                        <div class="row">
                            <div class="col-lg-6 col-12">
                                <div class="form-group mb-24">
                                    <input type="text" class="form-control" id="name" name="name" required
                                        placeholder="Your Name">
                                </div>
                            </div>
                            <div class="col-lg-6 col-12">
                                <div class="form-group mb-24">
                                    <input type="text" class="form-control" id="email" name="email" placeholder="Email">
                                    <small id="email-error" style="color:red; display:none;">
                                        Email is not valid
                                    </small>
                                </div>
                            </div>
                            <div class="col-lg-6 col-12">
                                <div class="form-group mb-24">
                                    <input type="tel" class="form-control" id="phone" name="phone"
                                        placeholder="Phone Number" oninput="validatePhone(this)">
                                    <small id="phone-error" style="color: red; display: none;">Phone number must be
                                        exactly
                                        11 digits.</small>
                                </div>
                            </div>
                            <div class="col-lg-6 col-12">
                                <div class="form-group mb-24">
                                    <input type="date" name="date" id="checkIn" class="form-control date_from" required
                                        placeholder="Date">
                                </div>
                            </div>
                            <div class="col-lg-6 col-12">
                                <div class="form-group mb-24">
                                    <select class="form-selector" name="service-name" required>
                                        <option value="1" disabled selected>Select Service</option>
                                        <?php
                                        $sql6 = "select * from services";
                                        $sql6Run = mysqli_query($conn, $sql6);
                                        while ($row6 = mysqli_fetch_array($sql6Run)) {
                                            ?>
                                            <option value="<?php echo $row6['serviceID']; ?>">
                                                <?php echo $row6['serviceTitle']; ?>
                                            </option>
                                        <?php } ?>
                                        <!-- <option value="hair cut">HAIR CUT</option>
                                                <option value="beard trim">BEARD TRIM</option>
                                                <option value="hair wash">HAIR WASH</option> -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6 col-12">
                                <div class="form-group mb-48">
                                    <select class="form-selector" name="employee">
                                        <option value="1" disabled selected>Select Barber</option>
                                        <?php
                                        $sql7 = "select * from employee";
                                        $sql7Run = mysqli_query($conn, $sql7);
                                        while ($row7 = mysqli_fetch_array($sql7Run)) {
                                            ?>
                                            <option value="<?php echo $row7['employeeID']; ?>">
                                                <?php echo $row7['fullName']; ?>
                                            </option>
                                        <?php } ?>
                                        <!-- <option value="dapper">Dapper Barber</option>
                                                <option value="gentelman">Gentleman's Barber</option>
                                                <option value="barber">Barbers Den</option> -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <button type="submit" name="submit" class="barber-btn">Book Appointment</button>
                        </div>
                        <div id="message" class="alert-msg"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- appoinment form Area end -->
</div>

<!-- Jquery Js -->
<script src="assets/js/vendor/jquery-3.6.3.min.js"></script>
<script src="assets/js/vendor/bootstrap.min.js"></script>
<script src="assets/js/vendor/slick.min.js"></script>
<script src="assets/js/vendor/jquery-appear.js"></script>
<script src="assets/js/vendor/jquery-validator.js"></script>
<script src="assets/js/vendor/smooth-scrollbar.js"></script>
<script src="assets/js/vendor/picker.js"></script>
<script src="assets/js/vendor/picker.date.js"></script>

<!-- Site Scripts -->
<script src="assets/js/date.js"></script>
<script src="assets/js/app.js"></script>

<script>

    //VALIDATIONS
    function validatePhone(input) {
        // Allow only numbers
        input.value = input.value.replace(/[^0-9]/g, '');

        // Check if input has exactly 11 digits on blur (or any trigger)
        const errorElement = document.getElementById('phone-error');
        if (input.value.length === 11) {
            errorElement.style.display = 'none'; // Hide error if valid
        } else {
            errorElement.style.display = 'block'; // Show error otherwise
        }
    }

    // function validateEmail(input){
    //     input.value =input.value.replace(/^[^\s@]+@[^\s@]+\.[^\s@]+$/g,'');

    //     const emailError =document.getElementById('email-error');
    //     if(input.value){
    //         emailError.style.display = 'none';
    //     }else{
    //         emailError.style.display = 'block';
    //     }
    // }

    // Validate on form submit
    document.querySelector('form').addEventListener('submit', function (e) {
        //for phone number validation
        const phoneInput = document.getElementById('phone');
        const errorElement = document.getElementById('phone-error');

        // const emailInput = document.getElementById('email');
        // const emailError = document.getElementById('email-error');
        // const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        // if (!emailPattern.test(emailInput.value)) {
        //     e.preventDefault(); // Prevent form submission
        //     emailError.style.display = 'block'; // Show error
        // } else {
        //     emailError.style.display = 'none'; // Hide error
        // }

        if (phoneInput.value.length !== 11) {
            e.preventDefault(); // Prevent form submission
            errorElement.style.display = 'block'; // Show error
        } else {
            errorElement.style.display = 'none'; // Hide error
        }
    });


</script>

</body>


<!-- Mirrored from uiparadox.co.uk/templates/trimStyle/v3/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 25 Oct 2024 17:38:53 GMT -->

</html>